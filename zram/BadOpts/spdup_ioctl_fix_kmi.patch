From e06fb22031f70f045e715918ed9fb2e72dcf6ca9 Mon Sep 17 00:00:00 2001
From: Pzqqt <821026875@qq.com>
Date: Sat, 20 Sep 2025 18:08:21 +0800
Subject: [PATCH] sync_file.h: Fix ABI break caused by 5e49a681d070

---
 include/linux/sync_file.h | 14 ++++++++++++++
 1 file changed, 14 insertions(+)

diff --git a/include/linux/sync_file.h b/include/linux/sync_file.h
index a022809009ac..3fd781b6d674 100644
--- a/include/linux/sync_file.h
+++ b/include/linux/sync_file.h
@@ -34,6 +34,20 @@
  */
 struct sync_file {
 	struct file		*file;
+#ifdef __GENKSYMS__
+	// HACK: CRC ABI fixups
+	/**
+	 * @user_name:
+	 *
+	 * Name of the sync file provided by userspace, for merged fences.
+	 * Otherwise generated through driver callbacks (in which case the
+	 * entire array is 0).
+	 */
+	char			user_name[32];
+#else
+	/* HACK: KABI preservation, DO NOT USE! */
+	char			unused[32];
+#endif
 #ifdef CONFIG_DEBUG_FS
 	struct list_head	sync_file_list;
 #endif
